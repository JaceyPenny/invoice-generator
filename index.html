<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>Invoice Generator</h1>

        <form id="invoiceForm">
            <!-- My Information Section -->
            <section class="section">
                <h2>My Information</h2>
                <div class="form-group">
                    <label for="myName">Name:</label>
                    <input type="text" id="myName" name="myName" required>
                </div>
                <div class="form-group">
                    <label for="myAddress">Address:</label>
                    <textarea id="myAddress" name="myAddress" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="myPhone">Phone Number:</label>
                        <input type="tel" id="myPhone" name="myPhone">
                    </div>
                    <div class="form-group">
                        <label for="myEmail">Email:</label>
                        <input type="email" id="myEmail" name="myEmail">
                    </div>
                </div>
                <div class="form-group">
                    <label for="checksPayableName">Checks Payable To:</label>
                    <input type="text" id="checksPayableName" name="checksPayableName">
                </div>
            </section>

            <!-- Invoice Details Section -->
            <section class="section">
                <h2>Invoice Details</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="invoiceDate">Invoice Date:</label>
                        <input type="date" id="invoiceDate" name="invoiceDate" required>
                    </div>
                    <div class="form-group">
                        <label for="invoiceNumber">Invoice Number:</label>
                        <input type="number" id="invoiceNumber" name="invoiceNumber" min="1" step="1">
                    </div>
                </div>
            </section>

            <!-- Client Details Section -->
            <section class="section">
                <h2>Client Details</h2>
                <div class="form-group">
                    <label for="addressBookSelect">Saved Addresses:</label>
                    <div class="address-book-row">
                        <select id="addressBookSelect" class="form-control">
                            <option value="">Select a saved address...</option>
                        </select>
                        <button type="button" id="manageAddressesBtn" class="btn btn-manage" title="Manage saved addresses">Manage</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clientName">Client Name:</label>
                    <input type="text" id="clientName" name="clientName" required>
                </div>
                <div class="form-group">
                    <label for="clientCompany">Company Name:</label>
                    <input type="text" id="clientCompany" name="clientCompany">
                </div>
                <div class="form-group">
                    <label for="clientAddress">Address:</label>
                    <textarea id="clientAddress" name="clientAddress" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="clientPhone">Phone Number:</label>
                        <input type="tel" id="clientPhone" name="clientPhone">
                    </div>
                    <div class="form-group">
                        <label for="clientEmail">Email:</label>
                        <input type="email" id="clientEmail" name="clientEmail">
                    </div>
                </div>
            </section>

            <!-- Case Information Section -->
            <section class="section">
                <h2>Case Information</h2>
                <div class="form-group">
                    <label for="caseInfo">Case Details:</label>
                    <textarea id="caseInfo" name="caseInfo" rows="2" placeholder="e.g., Case Name, Case Number, Court, etc." required></textarea>
                </div>
            </section>

            <!-- Items Section -->
            <section class="section">
                <h2>Items</h2>
                <div class="items-container">
                    <table id="itemsTable">
                        <thead>
                            <tr>
                                <th style="width: 30px;"></th>
                                <th>Description</th>
                                <th>Quantity</th>
                                <th>Unit Price</th>
                                <th>Total</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="itemsTableBody">
                            <!-- Items will be added dynamically -->
                        </tbody>
                    </table>
                    <div class="items-buttons">
                        <button type="button" id="prefillItemsBtn" class="btn btn-primary">Pre-fill Deposition</button>
                        <button type="button" id="prefillCopyBtn" class="btn btn-primary">Pre-fill Copy</button>
                        <button type="button" id="addItemBtn" class="btn btn-secondary">Add Item</button>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="section">
                <h2>Summary</h2>
                <div class="summary">
                    <div class="summary-row">
                        <span class="summary-label">Balance Due:</span>
                        <span class="summary-value" id="balanceDue">$0.00</span>
                    </div>
                    <div class="payment-instructions">
                        <strong>Payment Instructions:</strong> Due upon receipt
                    </div>
                </div>
            </section>

            <!-- Action Buttons -->
            <div class="actions">
                <button type="button" id="printBtn" class="btn btn-primary">Generate PDF</button>
                <button type="button" id="clearBtn" class="btn btn-secondary">Clear Form</button>
            </div>
        </form>
    </div>

    <!-- Hidden invoice template for PDF generation -->
    <div id="invoicePDF" style="position: absolute; left: -9999px; top: 0; width: 8.5in;">
        <div class="invoice-pdf">
            <div class="invoice-header">
                <div class="invoice-title">INVOICE</div>
                <div class="invoice-meta">
                    <div><strong>Invoice #:</strong> <span id="pdf-invoice-number"></span></div>
                    <div><strong>Date:</strong> <span id="pdf-invoice-date"></span></div>
                </div>
            </div>

            <div class="invoice-addresses">
                <div class="invoice-from">
                    <div class="address-label">From:</div>
                    <div id="pdf-my-name" class="address-name"></div>
                    <div id="pdf-my-address" class="address-details"></div>
                </div>
                <div class="invoice-to">
                    <div class="address-label">Bill To:</div>
                    <div id="pdf-client-name" class="address-name"></div>
                    <div id="pdf-client-company" class="address-company"></div>
                    <div id="pdf-client-address" class="address-details"></div>
                    <div id="pdf-client-contact" class="address-contact"></div>
                </div>
            </div>

            <table class="invoice-items-table">
                <thead>
                    <tr>
                        <th class="col-desc">Description</th>
                        <th class="col-total">Total</th>
                    </tr>
                </thead>
                <tbody id="pdf-items-body">
                </tbody>
            </table>

            <div class="invoice-footer">
                <div class="invoice-total">
                    <div class="total-row">
                        <span class="total-label">Balance Due:</span>
                        <span class="total-amount" id="pdf-balance-due"></span>
                    </div>
                </div>
                <div class="invoice-payment">
                    <strong>Payment Instructions:</strong> Due upon receipt
                </div>
            </div>
        </div>
    </div>
    </form>
    </div>

    <!-- Address Book Management Modal -->
    <div id="addressBookModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Manage Saved Addresses</h3>
                <button type="button" class="modal-close" id="modalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="addressList" class="address-list">
                    <!-- Addresses will be populated here -->
                </div>
                <div id="noAddressesMsg" class="no-addresses" style="display: none;">
                    No saved addresses found.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="deleteSelectedBtn" class="btn btn-danger" disabled>Delete Selected</button>
                <button type="button" id="modalCancelBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Pre-fill Deposition Modal -->
    <div id="prefillItemsModal" class="modal">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h3>Pre-fill Deposition Invoice</h3>
                <button type="button" class="modal-close" id="prefillModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Deposition Section -->
                <div class="prefill-section">
                    <h4>Deposition Details</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="depoDate">Date of Deposition:</label>
                            <input type="date" id="depoDate" name="depoDate">
                        </div>
                        <div class="form-group">
                            <label for="depoName">Name of Deposed:</label>
                            <input type="text" id="depoName" name="depoName" placeholder="e.g., John Smith">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="depoPages">Number of Pages:</label>
                            <input type="number" id="depoPages" name="depoPages" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="depoRate">Page Rate ($):</label>
                            <input type="number" id="depoRate" name="depoRate" min="0" step="0.01" value="5.50">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="depoWorkersComp" name="depoWorkersComp">
                                Worker's Comp Copy
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="depoCopyRate">Worker's Comp Rate ($):</label>
                            <input type="number" id="depoCopyRate" name="depoCopyRate" min="0" step="0.01" value="0.95">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="depoExtra">Extra Information (optional):</label>
                        <input type="text" id="depoExtra" name="depoExtra" placeholder="e.g., expedited, rough draft">
                    </div>
                </div>

                <!-- Appearance Fee Section -->
                <div class="prefill-section">
                    <h4>Appearance Fee</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appearanceHours">Hours Worked:</label>
                            <input type="number" id="appearanceHours" name="appearanceHours" min="0" step="0.5" value="3">
                        </div>
                        <div class="form-group">
                            <label for="appearanceRate">Rate per Hour ($):</label>
                            <input type="number" id="appearanceRate" name="appearanceRate" min="0" step="0.01" value="49.50">
                        </div>
                    </div>
                    <p class="form-hint">Note: Minimum billing is 3 hours. If less than 3 hours entered, 3 hours will be billed.</p>
                </div>

                <!-- Exhibits Section -->
                <div class="prefill-section">
                    <h4>Exhibits</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="exhibitsBW">Black & White Pages:</label>
                            <input type="number" id="exhibitsBW" name="exhibitsBW" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="exhibitsBWRate">B&W Rate ($):</label>
                            <input type="number" id="exhibitsBWRate" name="exhibitsBWRate" min="0" step="0.01" value="0.25">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="exhibitsColor">Color Pages:</label>
                            <input type="number" id="exhibitsColor" name="exhibitsColor" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="exhibitsColorRate">Color Rate ($):</label>
                            <input type="number" id="exhibitsColorRate" name="exhibitsColorRate" min="0" step="0.01" value="1.00">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="prefillApplyBtn" class="btn btn-primary">Apply to Invoice</button>
                <button type="button" id="prefillCancelBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Pre-fill Copy Modal -->
    <div id="prefillCopyModal" class="modal">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h3>Pre-fill Copy of Deposition Invoice</h3>
                <button type="button" class="modal-close" id="copyModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Deposition Section -->
                <div class="prefill-section">
                    <h4>Copy of Deposition Details</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="copyDepoDate">Date of Deposition:</label>
                            <input type="date" id="copyDepoDate" name="copyDepoDate">
                        </div>
                        <div class="form-group">
                            <label for="copyDepoName">Name of Deposed:</label>
                            <input type="text" id="copyDepoName" name="copyDepoName" placeholder="e.g., John Smith">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="copyDepoPages">Number of Pages:</label>
                            <input type="number" id="copyDepoPages" name="copyDepoPages" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="copyDepoRate">Page Rate ($):</label>
                            <input type="number" id="copyDepoRate" name="copyDepoRate" min="0" step="0.01" value="2.25">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="copyDepoExtra">Extra Information (optional):</label>
                        <input type="text" id="copyDepoExtra" name="copyDepoExtra" placeholder="e.g., expedited, rough draft">
                    </div>
                </div>

                <!-- Exhibits Section -->
                <div class="prefill-section">
                    <h4>Exhibits</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="copyExhibitsBW">Black & White Pages:</label>
                            <input type="number" id="copyExhibitsBW" name="copyExhibitsBW" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="copyExhibitsBWRate">B&W Rate ($):</label>
                            <input type="number" id="copyExhibitsBWRate" name="copyExhibitsBWRate" min="0" step="0.01" value="0.25">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="copyExhibitsColor">Color Pages:</label>
                            <input type="number" id="copyExhibitsColor" name="copyExhibitsColor" min="0" step="1" value="0">
                        </div>
                        <div class="form-group">
                            <label for="copyExhibitsColorRate">Color Rate ($):</label>
                            <input type="number" id="copyExhibitsColorRate" name="copyExhibitsColorRate" min="0" step="0.01" value="1.00">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="copyApplyBtn" class="btn btn-primary">Apply to Invoice</button>
                <button type="button" id="copyCancelBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>